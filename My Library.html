<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="CSS/main.css">
    <title></title>
    <style>
        body {
            background: url(image/FonL.jpg) center center fixed;
		} 
       
        .book-table {
            width: 80%;
            margin: 20px auto;
			 border-spacing: 0;
            linear-gradient: transparent;
            background-color: transparent;
        }
        .book-table th, .book-table td {
            padding: 10px;
            border: 1px solid transparent;
			
        }
        .book-container {
            position: relative;
            display: inline-block;
        }
        .book-info {
            display: none;
            position: absolute;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px;
            border: 1px solid #ccc;
            width: 200px;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            z-index: 2000;
        }
        .book-container:hover .book-info {
            display: block;
        }
		  .tab { 
  tab-size: 10; 
}

        .editable {
            cursor: pointer;
        }
        .editing {
            border: 1px solid #ccc;
            padding: 5px;
        }
        .book-image {
            max-width: 100px;
            max-height: 100px;
        }
    </style>
</head>
<body>
      <div class="navbar">
 <a href="https://magicallibary.net/">HomePage</a>
        <button class="register-btn" onclick="toggleRegisterForm(event)">Registration</button>
        <div class="dropdown">
            <button class="dropbtn">Author's Corner</button>
            <div class="dropdown-content">
			<a href="AuthorsCorner.html">AuthorsCorner</a>
                <a href="Three from the Forest.html">"Three from the Forest"</a>
                <a href="Drizzt Do’Urden.html">Drizzt Do’Urden</a>
                <a href="Sheriff.html">Sheriff</a>
            </div>
        </div>
        <div class="dropdown">
            <button class="dropbtn">Personal Page</button>
            <div class="dropdown-content">
                <a href="My Library.html">My Library</a>
                <a href="My details.html">My details</a>
            </div>
        </div>
        <div class="dropdown">
            <button class="dropbtn">Forum</button>
            <div class="dropdown-content">
                <a href="Forum.html">Forum</a>
                <a href="In development.html">Rules</a>
                <a href="In development.html">News</a>
            </div>
        </div>
        <div class="dropdown">
            <button class="dropbtn">Links</button>
            <div class="dropdown-content">
                <a href="Where Buy book.html">Where Buy book</a>
                <a href="Where reading.html">Where reading</a>
                <a href="Useful links.html">Useful links</a>
            </div>
        </div>
		<select id="language-selector">
        <option value="en">English</option>
        <option value="ru">Русский</option>
        <option value="Ukr">Українській</option>
    </select>
    </div>
	<div id="register" class="register-form">
        <h2>Register</h2>
        <form>
            <input type="text" placeholder="Username" required>
            <input type="email" placeholder="Email" required>
            <input type="password" placeholder="Password" required>
            <button type="submit">Sign Up</button>
        </form>
    </div>
  
       <div class="content">
	 
        <h2>Library Collection&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;</h2>
		<h2>What has already been read&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;</h2>
        <table class="book-table">
            <tr>
                <td>
                   <div class="book-container" id="bookTable">
                       <strong>&nbsp;&nbsp;In the Very Beginning (2008) </strong><br>&nbsp;Yuri Aleksandrovich Nikitin
                       <div class="book-info">
                           <img src="image/3inF_1.jpg" alt="Book Cover" width="100"><br>
                     <p>And God said: let there be light... The naive believe that this was the beginning. 
						But no, much earlier was the beginning of all beginnings. And then, yes, a lot of everything:
						the Universe, a wonderful garden, the tree of knowledge of good and evil, the triangle of Adam,
						Eve and Lilith, the furious Methuselah with a sword in his hand, the rebellion of angels, 
						the extermination of dragons, an arrow in the heart of Cain, the global flood and the total 
						extermination of the Nephilim, Stokkim and other giants.</p>
                        </div>
                    </div>
                </td>
                <td>
                    <div class="book-container">
                        <strong>Book Two</strong><br>Author Two
                        <div class="book-info">
                            <img src="image/book2.jpg" alt="Book Cover" width="100"><br>
                            <p>Description of Book Two.</p>
                        </div>
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    <div class="book-container">
                        <strong>Book Three</strong><br>Author Three
                        <div class="book-info">
                            <img src="image/book3.jpg" alt="Book Cover" width="100"><br>
                            <p>Description of Book Three.</p>
                        </div>
                    </div>
                </td>
                <td>
                    <div class="book-container">
                        <strong>Book Four</strong><br>Author Four
                        <div class="book-info">
                            <img src="book4.jpg" alt="Book Cover" width="100"><br>
                            <p>Description of Book Four.</p>
                        </div>
                    </div>
                </td>
            </tr>
			<tr>
                <td>
                    <div class="book-container">
                        <strong>Book Three</strong><br>Author Three
                        <div class="book-info">
                            <img src="book3.jpg" alt="Book Cover" width="100"><br>
                            <p>Description of Book Three.</p>
                        </div>
                    </div>
                </td>
                <td>
                    <div class="book-container">
                        <strong>Book Four</strong><br>Author Four
                        <div class="book-info">
                            <img src="book4.jpg" alt="Book Cover" width="100"><br>
                            <p>Description of Book Four.</p>
                        </div>
                    </div>
                </td>
            </tr>
			<tr>
                <td>
                    <div class="book-container">
                        <strong>Book Three</strong><br>Author Three
                        <div class="book-info">
                            <img src="book3.jpg" alt="Book Cover" width="100"><br>
                            <p>Description of Book Three.</p>
                        </div>
                    </div>
                </td>
                <td>
                    <div class="book-container">
                        <strong>Book Four</strong><br>Author Four
                        <div class="book-info">
                            <img src="book4.jpg" alt="Book Cover" width="100"><br>
                            <p>Description of Book Four.</p>
                        </div>
                    </div>
                </td>
            </tr>
			<tr>
                <td>
                    <div class="book-container">
                        <strong>Book Three</strong><br>Author Three
                        <div class="book-info">
                            <img src="book3.jpg" alt="Book Cover" width="100"><br>
                            <p>Description of Book Three.</p>
                        </div>
                    </div>
                </td>
                <td>
                    <div class="book-container">
                        <strong>Book Four</strong><br>Author Four
                        <div class="book-info">
                            <img src="book4.jpg" alt="Book Cover" width="100"><br>
                            <p>Description of Book Four.</p>
                        </div>
                    </div>
                </td>
            </tr>
			<tr>
                <td>
                    <div class="book-container">
                        <strong>Book Three</strong><br>Author Three
                        <div class="book-info">
                            <img src="book3.jpg" alt="Book Cover" width="100"><br>
                            <p>Description of Book Three.</p>
                        </div>
                    </div>
                </td>
                <td>
                    <div class="book-container">
                        <strong>Book Four</strong><br>Author Four
                        <div class="book-info">
                            <img src="book4.jpg" alt="Book Cover" width="100"><br>
                            <p>Description of Book Four.</p>
                        </div>
                    </div>
                </td>
            </tr>
			<tr>
                <td>
                    <div class="book-container">
                        <strong>Book Three</strong><br>Author Three
                        <div class="book-info">
                            <img src="book3.jpg" alt="Book Cover" width="100"><br>
                            <p>Description of Book Three.</p>
                        </div>
                    </div>
                </td>
                <td>
                    <div class="book-container">
                        <strong>Book Four</strong><br>Author Four
                        <div class="book-info">
                            <img src="book4.jpg" alt="Book Cover" width="100"><br>
                            <p>Description of Book Four.</p>
                        </div>
                    </div>
                </td>
            </tr>
			<tr>
                <td>
                    <div class="book-container">
                        <strong>Book Three</strong><br>Author Three
                        <div class="book-info">
                            <img src="book3.jpg" alt="Book Cover" width="100"><br>
                            <p>Description of Book Three.</p>
                        </div>
                    </div>
                </td>
                <td>
                    <div class="book-container">
                        <strong>Book Four</strong><br>Author Four
                        <div class="book-info">
                            <img src="book4.jpg" alt="Book Cover" width="100"><br>
                            <p>Description of Book Four.</p>
                        </div>
                    </div>
                </td>
            </tr>
			<tr>
                <td>
                    <div class="book-container">
                        <strong>Book Three</strong><br>Author Three
                        <div class="book-info">
                            <img src="book3.jpg" alt="Book Cover" width="100"><br>
                            <p>Description of Book Three.</p>
                        </div>
                    </div>
                </td>
                <td>
                    <div class="book-container">
                        <strong>Book Four</strong><br>Author Four
                        <div class="book-info">
                            <img src="book4.jpg" alt="Book Cover" width="100"><br>
                            <p>Description of Book Four.</p>
                        </div>
                    </div>
                </td>
            </tr>
			<tr>
                <td>
                    <div class="book-container">
                        <strong>Book Three</strong><br>Author Three
                        <div class="book-info">
                            <img src="book3.jpg" alt="Book Cover" width="100"><br>
                            <p>Description of Book Three.</p>
                        </div>
                    </div>
                </td>
                <td>
                    <div class="book-container">
                        <strong>Book Four</strong><br>Author Four
                        <div class="book-info">
                            <img src="book4.jpg" alt="Book Cover" width="100"><br>
                            <p>Description of Book Four.</p>
                        </div>
                    </div>
                </td>
            </tr>
			<tr>
                <td>
                    <div class="book-container">
                        <strong>Book Three</strong><br>Author Three
                        <div class="book-info">
                            <img src="book3.jpg" alt="Book Cover" width="100"><br>
                            <p>Description of Book Three.</p>
                        </div>
                    </div>
                </td>
                <td>
                    <div class="book-container">
                        <strong>Book Four</strong><br>Author Four
                        <div class="book-info">
                            <img src="book4.jpg" alt="Book Cover" width="100"><br>
                            <p>Description of Book Four.</p>
                        </div>
                    </div>
                </td>
            </tr>
			<tr>
                <td>
                    <div class="book-container">
                        <strong>Book Three</strong><br>Author Three
                        <div class="book-info">
                            <img src="book3.jpg" alt="Book Cover" width="100"><br>
                            <p>Description of Book Three.</p>
                        </div>
                    </div>
                </td>
                <td>
                    <div class="book-container">
                        <strong>Book Four</strong><br>Author Four
                        <div class="book-info">
                            <img src="book4.jpg" alt="Book Cover" width="100"><br>
                            <p>Description of Book Four.</p>
                        </div>
                    </div>
                </td>
            </tr>
			<tr>
                <td>
                    <div class="book-container">
                        <strong>Book Three</strong><br>Author Three
                        <div class="book-info">
                            <img src="book3.jpg" alt="Book Cover" width="100"><br>
                            <p>Description of Book Three.</p>
                        </div>
                    </div>
                </td>
                <td>
                    <div class="book-container">
                        <strong>Book Four</strong><br>Author Four
                        <div class="book-info">
                            <img src="book4.jpg" alt="Book Cover" width="100"><br>
                            <p>Description of Book Four.</p>
                        </div>
                    </div>
                </td>
            </tr>
			
        </table>
    </div>
     <div class="footer-nav">
        <a href="https://magicallibary.net/">
  <img src="image/Home.png" width="95" height="55" width="95">
		</a>
        <a href="http://www.linkedin.com/in/dmytro-kasimov-772a1b281">
  <img src="image/Ln.png" width="85" height="45" width="85">
</a>
        <a href="http://www.facebook.com/profile.php?id=100083754332377">
  <img src="image/Face.png" width="55" height="55" width="55">
</a>
        <a href="http://www.instagram.com/white.lord.7?gsh=ZTBpZ3lqNjRqdGtx">
  <img src="image/Inst.png" width="55" height="55" width="55">
</a>
    </div>
	 
    <script>
		document.addEventListener("click", function(event) {
            let form = document.getElementById("register");
	    
            let isRegisterBtn = event.target.classList.contains("register-btn");
            if (!form.contains(event.target) && !isRegisterBtn) {
                form.style.display = "none";
            }
        });
        function toggleRegisterForm(event) {
            event.stopPropagation();
            let form = document.getElementById("register");
            form.style.display = (form.style.display === "block") ? "none" : "block";
        }
        document.querySelectorAll('.dropbtn').forEach(button => {
            button.addEventListener('click', function(event) {
                event.preventDefault();
                event.stopPropagation();
                let parentDropdown = this.parentElement;
                parentDropdown.classList.toggle('active');
                document.querySelectorAll('.dropdown').forEach(dropdown => {
                    if (dropdown !== parentDropdown) {
                        dropdown.classList.remove('active');
                    }
                });
            });
        });
        document.addEventListener('click', function(event) {
            if (!event.target.closest('.dropdown')) {
                document.querySelectorAll('.dropdown').forEach(dropdown => {
                    dropdown.classList.remove('active');
                });
            }
        });
		
        const octokit = new Octokit({
            auth: 'DmytroKasimov.github.io'
        });
	     const owner = 'DmytroKasimov';
        const repo = 'DmytroKasimov.github.io';
        const path = 'books.json';

        let currentUser = null;
	    // Функція для завантаження книг користувача
        async function loadUserBooks() {
            try {
                const response = await octokit.repos.getContent({
                    owner,
                    repo,
                    path  });

                const content = atob(response.data.content);
                const books = JSON.parse(content);
		    let tableHTML = '';
                books.forEach((book, index) => {
                    tableHTML += `
                        <tr>
                            <td>
			    <div class="book-container">
                                    <strong class="editable" data-field="title" data-index="${index}">${book.title}</strong><br>
                                    <span class="editable" data-field="author" data-index="${index}">${book.author}</span>
                                    <div class="book-info">
                                        <img src="${book.imageUrl}" alt="Book Cover" class="book-image editable" data-field="image" data-index="${index}">
                                        <p class="editable" data-field="description" data-index="${index}">${book.description}</p>
                                    </div>
                                </div>
                            </td>
                        </tr>
			`;
                });
                document.getElementById('bookTable').innerHTML = tableHTML;
                addEditListeners();
            } catch (error) {
                console.error('Error loading books:', error);
            }
        }
	     function addEditListeners() {
            document.querySelectorAll('.editable').forEach(element => {
                element.addEventListener('click', function() {
                    const field = this.dataset.field;
                    const index = this.dataset.index;
                    const currentValue = this.innerText;
			 if (field === 'image') {
                        const input = document.createElement('input');
                        input.type = 'file';
                        input.accept = 'image/*';
                        input.onchange = (e) => updateImage(e, index, this);
                        input.click();
                    } else {
                        const input = document.createElement('input');
                        input.value = currentValue;
                        input.classList.add('editing');
                        this.innerHTML = '';
				  this.appendChild(input);
                        input.focus();

                        input.addEventListener('blur', function() {
                            updateField(field, index, this.value);
                            this.parentElement.innerText = this.value;
                        });

                        input.addEventListener('keypress', function(e) {
                            if (e.key === 'Enter') {
                                this.blur();
				      }
                        });
                    }
                });
            });
        }

        async function updateField(field, index, value) {
            try {
                const response = await octokit.repos.getContent({
                    owner,
			 repo,
                    path
                });

                const content = atob(response.data.content);
                let books = JSON.parse(content);

                books[index][field] = value;

                const updatedContent = btoa(JSON.stringify(books, null, 2));
		     await octokit.repos.createOrUpdateFileContents({
                    owner,
                    repo,
                    path,
                    message: `Update ${field} for book ${index}`,
                    content: updatedContent,
                    sha: response.data.sha
                });
            } catch (error) {
                console.error('Error updating field:', error);
		     }
        }

        async function updateImage(event, index, imgElement) {
            const file = event.target.files[0];
            const reader = new FileReader();

            reader.onload = async function(e) {
                const base64Image = e.target.result.split(',')[1];
                const imagePath = `images/${file.name}`;
		     try {
                    await octokit.repos.createOrUpdateFileContents({
                        owner,
                        repo,
                        path: imagePath,
                        message: `Upload image for book ${index}`,
                        content: base64Image
                    });

                    const imageUrl = `https://raw.githubusercontent.com/${owner}/${repo}/main/${imagePath}`;
                    imgElement.src = imageUrl;
			      await updateField('imageUrl', index, imageUrl);
                } catch (error) {
                    console.error('Error uploading image:', error);
                }
            };

            reader.readAsDataURL(file);
        }

        // Завантаження книг при завантаженні сторінки
        loadUserBooks();
	
	
    </script>
</body>
</html>




